
var example=[{"startdate": "2016-01-01 00:24:25", "detail_v": [1.2579274891774892, 0.7401515151515152, 1.1249080086580088, 1.1792911255411256, 1.9445032467532466, 0.5900974025974026, 0.2746590909090909, 2.7196709956709957], "vad_score": [9.831208874458873, 9.825862554112554, 9.20105844155844], "moodcount": [10, 4, 7, 9, 12, 6, 2, 15], "tfidf": [{"score": 0.007711067592930127, "word": "all"}, {"score": 0.011129771501421788, "word": "responsible"}, {"score": 0.0231494895914623, "word": "help"}, {"score": 0.0273444263017077, "word": "actions"}, {"score": 0.005473055951842388, "word": "amp"}, {"score": 0.00527478915246175, "word": "whitehouse"}, {"score": 0.017763505179602092, "word": "thank"}, {"score": 0.0091148087672359, "word": "excuses"}, {"score": 0.0, "word": "to"}, {"score": 0.0037824858496578453, "word": "add"}, {"score": 0.004742490753351382, "word": "going"}, {"score": 0.011129771501421788, "word": "kerrywashington"}, {"score": 0.0091148087672359, "word": "announce"}, {"score": 0.0010337619202519487, "word": "obama"}, {"score": 0.0019310106687361328, "word": "do"}, {"score": 0.0028936861989327877, "word": "his"}, {"score": 0.0091148087672359, "word": "sense"}, {"score": 0.002421247450392744, "word": "read"}, {"score": 0.005084883298864125, "word": "could"}, {"score": 0.011129771501421788, "word": "aurora"}, {"score": 0.0037824858496578453, "word": "watch"}, {"score": 0.005473055951842388, "word": "nation"}, {"score": 0.015254649896592375, "word": "every"}, {"score": 0.009484981506702765, "word": "know"}, {"score": 0.0037824858496578453, "word": "new"}, {"score": 0.010946111903684776, "word": "communities"}, {"score": 0.011129771501421788, "word": "using"}, {"score": 0.0022945011163020275, "word": "now"}, {"score": 0.003257532544729317, "word": "day"}, {"score": 0.0033171212701605403, "word": "name"}, {"score": 0.007099846033050012, "word": "always"}, {"score": 0.017744840738314525, "word": "gun"}, {"score": 0.011129771501421788, "word": "janellemonae"}, {"score": 0.017744840738314525, "word": "steps"}, {"score": 0.01016976659772825, "word": "t"}, {"score": 0.005473055951842388, "word": "done"}, {"score": 0.004742490753351382, "word": "security"}, {"score": 0.011129771501421788, "word": "inaction"}, {"score": 0.011129771501421788, "word": "barbara"}, {"score": 0.004436210184578631, "word": "right"}, {"score": 0.011129771501421788, "word": "creek"}, {"score": 0.0013411208328564564, "word": "are"}, {"score": 0.0073470467385323155, "word": "year"}, {"score": 0.011129771501421788, "word": "navy"}, {"score": 0.0025703558643100422, "word": "et"}, {"score": 0.008872420369157263, "word": "even"}, {"score": 0.009117662311228745, "word": "what"}, {"score": 0.0, "word": "for"}, {"score": 0.011129771501421788, "word": "applaud"}, {"score": 0.004159145708403269, "word": "enough"}, {"score": 0.007099846033050012, "word": "sotu"}, {"score": 0.0016585606350802702, "word": "progress"}, {"score": 0.011129771501421788, "word": "guns"}, {"score": 0.0091148087672359, "word": "announced"}, {"score": 0.007936131127386586, "word": "common"}, {"score": 0.003332358780744928, "word": "we"}, {"score": 0.005473055951842388, "word": "full"}, {"score": 0.004742490753351382, "word": "power"}, {"score": 0.004159145708403269, "word": "step"}, {"score": 0.011129771501421788, "word": "binghamton"}, {"score": 0.10316970465602561, "word": "stopgunviolence"}, {"score": 0.015872262254773173, "word": "safer"}, {"score": 0.008182584057496485, "word": "by"}, {"score": 0.0013411208328564564, "word": "change"}, {"score": 0.00025844048006298716, "word": "on"}, {"score": 0.00309770075863236, "word": "about"}, {"score": 0.011129771501421788, "word": "yard"}, {"score": 0.0, "word": "of"}, {"score": 0.008872420369157263, "word": "taking"}, {"score": 0.013308630553735894, "word": "violence"}, {"score": 0.011129771501421788, "word": "murdered"}, {"score": 0.007099846033050012, "word": "conversation"}, {"score": 0.006515065089458634, "word": "s"}, {"score": 0.004842494900785488, "word": "stand"}, {"score": 0.006515065089458634, "word": "act"}, {"score": 0.003257532544729317, "word": "action"}, {"score": 0.011129771501421788, "word": "charleston"}, {"score": 0.00390620565901481, "word": "think"}, {"score": 0.011129771501421788, "word": "santa"}, {"score": 0.006139841129356475, "word": "one"}, {"score": 0.011129771501421788, "word": "gabbygiffords"}, {"score": 0.011129771501421788, "word": "lies"}, {"score": 0.011129771501421788, "word": "brave"}, {"score": 0.0020149627341858873, "word": "americans"}, {"score": 0.011129771501421788, "word": "reducing"}, {"score": 0.0010035115969603543, "word": "your"}, {"score": 0.011129771501421788, "word": "hood"}, {"score": 0.0091148087672359, "word": "standing"}, {"score": 0.00309770075863236, "word": "has"}, {"score": 0.004436210184578631, "word": "working"}, {"score": 0.005473055951842388, "word": "getcovered"}, {"score": 0.011129771501421788, "word": "start"}, {"score": 0.0016585606350802702, "word": "live"}, {"score": 0.005473055951842388, "word": "call"}, {"score": 0.004436210184578631, "word": "too"}, {"score": 0.004742490753351382, "word": "way"}, {"score": 0.007936131127386586, "word": "chip"}, {"score": 0.00316487349147705, "word": "today"}, {"score": 0.00105495783049235, "word": "more"}, {"score": 0.005921168393200698, "word": "almost"}, {"score": 0.0009655053343680664, "word": "that"}, {"score": 0.011129771501421788, "word": "bernardino"}, {"score": 0.004159145708403269, "word": "protect"}, {"score": 0.006515065089458634, "word": "but"}, {"score": 0.015872262254773173, "word": "lives"}, {"score": 0.011129771501421788, "word": "newtown"}, {"score": 0.006451172918764519, "word": "demand"}, {"score": 0.0034580932176565007, "word": "last"}, {"score": 0.011129771501421788, "word": "fort"}, {"score": 0.007099846033050012, "word": "save"}, {"score": 0.004742490753351382, "word": "these"}, {"score": 0.004970279242173717, "word": "up"}, {"score": 0.011718616977044431, "word": "us"}, {"score": 0.014199692066100025, "word": "final"}, {"score": 0.0072637423511782324, "word": "will"}, {"score": 0.008182584057496485, "word": "can"}, {"score": 0.0091148087672359, "word": "many"}, {"score": 0.011129771501421788, "word": "madeleine"}, {"score": 0.01239080303452944, "word": "potus"}, {"score": 0.0020149627341858873, "word": "agree"}, {"score": 0.0028936861989327877, "word": "say"}, {"score": 0.00025556868277645545, "word": "and"}, {"score": 0.011129771501421788, "word": "constant"}, {"score": 0.011129771501421788, "word": "san"}, {"score": 0.007936131127386586, "word": "strengthen"}, {"score": 0.00019167651208234156, "word": "is"}, {"score": 0.011129771501421788, "word": "elizabethbanks"}, {"score": 0.0004062847162068565, "word": "it"}, {"score": 0.011129771501421788, "word": "dash"}, {"score": 0.0091148087672359, "word": "talking"}, {"score": 0.0034580932176565007, "word": "as"}, {"score": 0.0009655053343680664, "word": "at"}, {"score": 0.0, "word": "in"}, {"score": 0.002279415577807186, "word": "need"}, {"score": 0.005364483331425826, "word": "if"}, {"score": 0.005084883298864125, "word": "needs"}, {"score": 0.0034580932176565007, "word": "no"}, {"score": 0.0072637423511782324, "word": "make"}, {"score": 0.006451172918764519, "word": "breaking"}, {"score": 0.011129771501421788, "word": "oak"}, {"score": 0.006515065089458634, "word": "how"}, {"score": 0.0030699205646782376, "word": "take"}, {"score": 0.0024377082972411386, "word": "you"}, {"score": 0.003345038656534514, "word": "rt"}, {"score": 0.011129771501421788, "word": "commonsense"}, {"score": 0.0182296175344718, "word": "tried"}, {"score": 0.01953102829507405, "word": "congress"}, {"score": 0.00126583420840041, "word": "our"}, {"score": 0.0203395331954565, "word": "stop"}, {"score": 0.005921168393200698, "word": "nothing"}, {"score": 0.0013723516440951379, "word": "president"}, {"score": 0.005455056038330989, "word": "america"}, {"score": 0.022259543002843576, "word": "lobby"}, {"score": 0.0028936861989327877, "word": "tune"}, {"score": 0.0091148087672359, "word": "barackobama"}, {"score": 0.0005168809601259743, "word": "a"}, {"score": 0.005921168393200698, "word": "off"}, {"score": 0.007099846033050012, "word": "longer"}, {"score": 0.0036735233692661577, "word": "i"}, {"score": 0.0033171212701605403, "word": "time"}, {"score": 0.0, "word": "the"}], "detail_a": [1.4142857142857144, 0.6304696969696969, 1.0973809523809523, 1.2824350649350649, 1.7248106060606057, 0.7013636363636363, 0.30625, 2.6688668831168836], "detail_d": [1.2422781385281385, 0.6899848484848484, 1.0058170995670996, 1.175102813852814, 1.6763484848484849, 0.6705844155844155, 0.28772727272727266, 2.4532153679653677], "tweets": ["682718986295840769", "683069653682401280", "684063453913296896", "684087437354610688", "684173070328705024", "684402931861291008", "684414914052493312", "684420248380944385", "684424795849555968", "684426196138893312", "684442488874995712", "684473140869632000", "684477629748019200", "684485292808474624", "684488719089287168", "684505967422128128", "684519866322165760", "684777056232583168", "684797918310612992", "684850847189106689", "685163038169640960", "685190910997495809"], "enddate": "2016-01-07 20:06:58"}]

function drawtagcloud(name,i){
	
    book= window[name];
    // console.log(book[i]);

    wordsarr=book[i]['tfidf'];

    // console.log(wordsarr);
	d3.selectAll("#chartvis3").remove();
    d3.select("#vis3text").text("Word Cloud for Book:  > Chapter: ");
	var svg=d3.select("#vis3")
		.append("div").attr("id","chartvis3")
        .append("svg")
        .attr("width", 700)
        .attr("height", 500);

    var xScale = d3.scaleLinear()
       .domain([0, d3.max(wordsarr.map(function(d) {
            console.log(d);
            return d['score'];}))
           ])
           .range([10,100]);

	 d3.layout.cloud()
        .size([700, 500])
        .words(wordsarr.map(function(d) {
            return {text: d['word'], size: d['score']};}))
        .padding(1)
        .rotate(0)
        .font("Impact")
        .fontSize(function(d) { return xScale(+d.size); })
        .text(function(d) { return d.text; })
        .on("end", draw)
        .start();

	function draw(words) {
        svg.append("g")
        .attr("transform", "translate(400,250) scale(1,1)")
        .selectAll("text")
        .data(words)
        .enter().append("text")
        .style("font-family", "Impact")
        .style("font-size", function(d) { return d.size-3 + "px"; })
        //.style("fill", function(d, i) { return color(i); })
        //.style("stroke", "black")
        .attr("text-anchor", "middle")
        .attr("transform", function(d) {
            return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; });
}
}